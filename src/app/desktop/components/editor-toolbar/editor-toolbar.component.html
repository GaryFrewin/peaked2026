<nav class="editor-toolbar" role="toolbar" aria-label="Editor tools">
  <!-- Dynamic merge button (shown when 2+ holds selected) -->
  @if (showMergeButton()) {
    <div class="tool-wrapper merge-button-wrapper">
      <button
        class="tool-button merge-button"
        [attr.aria-label]="'Merge ' + selectedHoldCount() + ' holds'"
        (mouseenter)="onToolHover('merge')"
        (mouseleave)="onToolHover(null)"
        (click)="onMergeClick()"
      >
        <span class="tool-icon">ðŸ”€</span>
        <span class="active-indicator"></span>
      </button>

      <!-- Tooltip popup -->
      @if (isHovered('merge')) {
        <div class="tool-tooltip">
          <span class="tooltip-label">Merge {{ selectedHoldCount() }} holds</span>
        </div>
      }
      <div class="divider"></div>
    </div>
  }

  @for (tool of tools; track tool.id; let i = $index) {
    <div class="tool-wrapper" [style.animation-delay]="getAnimationDelay(i)">
      <button
        class="tool-button"
        [class.active]="isActive(tool.id)"
        [class.disabled]="tool.disabled"
        [attr.aria-pressed]="isActive(tool.id)"
        [attr.aria-label]="tool.label"
        (mouseenter)="onToolHover(tool.id)"
        (mouseleave)="onToolHover(null)"
        (click)="onToolClick(tool)"
      >
        <span class="tool-icon">{{ tool.icon }}</span>
        <span class="active-indicator"></span>
      </button>

      <!-- Tooltip popup -->
      @if (isHovered(tool.id)) {
        <div class="tool-tooltip">
          <span class="tooltip-label">{{ tool.label }}</span>
          @if (tool.shortcut) {
            <span class="tooltip-shortcut">{{ tool.shortcut }}</span>
          }
        </div>
      }

      @if (tool.dividerAfter) {
        <div class="divider"></div>
      }
    </div>
  }
</nav>
