<app-base-scene
  [wallModelUrl]="wallStore.modelPath() ?? ''"
  [holds]="holdStore.holds()"
  [visible]="true"
  (sceneReady)="onSceneReady()"
>
  <!-- Desktop-specific: 2D overlay for route drawing -->
  <div slot="overlay" class="scene-overlay">
    <!-- Route Annotations (only in route modes) -->
    @if (modeStore.isRouteMode()) {
      <app-route-annotations />
    }

    <div class="overlay-header">
      @if (wallStore.isLoading() || holdStore.isLoading()) {
        <span>Loading...</span>
      } @else if (wallStore.selectedWall()) {
        <span>{{ wallStore.selectedWall()?.name }}</span>
      } @else {
        <span>Desktop View</span>
      }
    </div>

    <!-- Route List Sidebar / Route Creation Panel -->
    <div class="overlay-sidebar">
      @if (modeStore.mode() === AppMode.CreateRoute) {
        <h3 class="sidebar-title">Create Route</h3>
        <app-route-creation-panel />
      } @else {
        <h3 class="sidebar-title">Routes</h3>
        <app-route-list />
      }
    </div>

    <!-- Settings Panel (toggleable) -->
    @if (settingsOpen()) {
      <div class="settings-overlay">
        <app-settings-panel />
      </div>
    }

    <!-- Editor Toolbar -->
    <app-editor-toolbar (toolSelected)="onToolSelected($event)" />
  </div>
</app-base-scene>
