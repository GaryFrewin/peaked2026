<app-base-scene
  [wallModelUrl]="wallStore.modelPath() ?? ''"
  [holds]="holdStore.holds()"
  [visible]="true"
  (sceneReady)="onSceneReady()"
>
  <!-- VR camera rig with controllers -->
  <div slot="camera">
    <a-entity id="cameraRig" position-tracker>
      <a-camera id="player"></a-camera>
      <a-entity id="leftController" laser-controls="hand: left" raycaster="objects: .interactable"></a-entity>
      <a-entity id="rightController" laser-controls="hand: right" raycaster="objects: .interactable, .hold"></a-entity>
    </a-entity>
  </div>

  <!-- VR-specific: Skybox (GLTF model) -->
  <a-entity 
    slot="environment"
    id="skybox" 
    scale="2 2 2" 
    position="0 0 0"
    [attr.dynamic-skybox]="'path: ' + settingsStore.selectedSkyboxPath()"
  ></a-entity>

  <!-- Skybox Occlusion - makes real wall visible through skybox -->
  <a-entity
    slot="environment"
    [attr.occlude-skybox]="'enabled: ' + settingsStore.occludeSkybox() + '; wallSelector: #wall-container'"
  ></a-entity>

  <!-- VR Route Selection Overlay - Full screen 2D UI -->
  <div slot="overlay" class="vr-overlay">
    <div class="vr-layout">
      <app-settings-panel class="vr-settings" />
      <app-vr-route-list class="vr-routes" />
    </div>
  </div>
</app-base-scene>
